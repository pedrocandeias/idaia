# NL FreeCAD Addon

Natural language ‚Üí FreeCAD Python.  
This workbench adds a dockable panel where you type short prompts like:

- `create a cube 10x10x10 mm`
- `create a cylinder radius 5 height 20`
- `move last object +10mm on X`

and the addon will call a **local Ollama persona** (`freecad-gen`) that translates the request into valid FreeCAD Python code.  
The code is then executed directly inside FreeCAD to create or modify geometry.

---

## ‚ú® Features

- Dockable **NL Panel** in FreeCAD GUI.  
- Uses [Ollama](https://ollama.com) running locally on your machine (no API costs).  
- Persona (`freecad-gen`) is fine-tuned via a **Modelfile** to always return JSON `{"code": "..."}` with FreeCAD Python.  
- Guardrails: execution is sandboxed (`safe_run`) to block dangerous imports or system calls.  
- Settings for:
  - Ollama URL (default `http://127.0.0.1:11434`)
  - Model name (default `freecad-gen`)
  - Temperature slider  
- ‚ÄúDry Run‚Äù mode to preview code without executing.  
- Output log panel for debugging.

---

## üì¶ Installation

1. Clone or download this repo into your FreeCAD `Mod` directory:  

   **Linux (user level):**  
   ```
   ~/.local/share/FreeCAD/Mod/Addon
   ```

   **Linux (system-wide):**  
   ```
   /usr/share/freecad/Mod/Addon
   ```

2. Restart FreeCAD.  
3. Select **NL FreeCAD** from the Workbench dropdown.  
4. Open the NL Panel (toolbar button or menu entry).

---

## üîß Requirements

- **FreeCAD 0.20+**
- **[Ollama](https://ollama.com/download)** installed and running locally.
- Persona model created from `llama3.2:3b` with a Modelfile:

   ```bash
   ollama create freecad-gen -f Modelfile
   ```

   Where the Modelfile contains strict instructions to output FreeCAD Python only.

---

## üöÄ Usage

1. Start Ollama in the background:  
   ```bash
   ollama serve
   ```
   (or just run any `ollama run` command once)

2. In FreeCAD, switch to **NL FreeCAD** workbench.  
3. Open the **NL Panel**.  
4. Enter a natural-language command.  
5. Check "Dry run" to preview or uncheck to execute.  

Example output for `create a cube 10x10x10 mm`:

```python
doc=App.ActiveDocument or App.newDocument()
o=doc.addObject("Part::Box","Box")
o.Length=10; o.Width=10; o.Height=10
doc.recompute()
```

---

## ‚ö†Ô∏è Security Note

This addon executes Python generated by an LLM.  
Although guardrails are in place, you should **always review code in Dry Run mode** before execution, especially if you change the persona or system prompt.

---

## üìú License

MIT License ‚Äî see [LICENSE](LICENSE).

---

## üñºÔ∏è Screenshot

*(Add a screenshot here of FreeCAD with the NL Panel open)*

---
